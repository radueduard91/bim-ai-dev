{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\R40008\\\\Asset Model Server\\\\python\\\\bim-ai-poc\\\\frontend\\\\src\\\\components\\\\TableVisualization\\\\components\\\\TableBody.js\";\nimport React from 'react';\nimport TableRow from '../../TableRow';\nimport { handleClickInput, setInputRef } from '../AttributeManagement';\nimport { getCellColor, getCellBorderStyle } from '../utils/CellUtils';\n\n/**\r\n * Safely renders display text with ellipsis\r\n * Fixes the \"Objects are not valid as React child\" error\r\n */\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst SafeDisplayText = ({\n  text\n}) => {\n  if (!text) return null;\n\n  // Safely convert to string and handle line breaks\n  const safeText = String(text);\n  const lines = safeText.split('\\n');\n  const firstTwoLines = lines.slice(0, 2).join('\\n');\n  const truncatedText = firstTwoLines.substring(0, 100);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      position: 'relative',\n      display: 'inline-block',\n      width: \"100%\"\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        overflow: 'hidden',\n        whiteSpace: 'pre-line',\n        maxWidth: \"calc(100% - 20px)\",\n        marginRight: \"2px\",\n        textOverflow: \"ellipsis\",\n        display: \"-webkit-box\",\n        WebkitLineClamp: 2,\n        WebkitBoxOrient: \"vertical\"\n      },\n      children: truncatedText\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 21,\n      columnNumber: 7\n    }, this), safeText.length > 100 && /*#__PURE__*/_jsxDEV(\"svg\", {\n      xmlns: \"http://www.w3.org/2000/svg\",\n      width: \"16\",\n      height: \"16\",\n      viewBox: \"0 0 24 24\",\n      fill: \"none\",\n      stroke: \"currentColor\",\n      strokeWidth: \"2\",\n      strokeLinecap: \"round\",\n      strokeLinejoin: \"round\",\n      style: {\n        position: 'absolute',\n        bottom: '2px',\n        right: '2px',\n        cursor: \"pointer\",\n        color: \"#64748b\"\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"circle\", {\n        cx: \"11\",\n        cy: \"11\",\n        r: \"8\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"line\", {\n        x1: \"21\",\n        y1: \"21\",\n        x2: \"16.65\",\n        y2: \"16.65\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"line\", {\n        x1: \"11\",\n        y1: \"8\",\n        x2: \"11\",\n        y2: \"14\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"line\", {\n        x1: \"8\",\n        y1: \"11\",\n        x2: \"14\",\n        y2: \"11\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 37,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 20,\n    columnNumber: 5\n  }, this);\n};\n\n/**\r\n * Component for rendering the table body with rows\r\n * Fixed version that prevents React object rendering issues\r\n */\n_c = SafeDisplayText;\nconst TableBody = ({\n  paginatedRows,\n  rowSpans,\n  clusterCounts,\n  objectCounts,\n  hoveredRow,\n  hoveredCell,\n  setHoveredRow,\n  setHoveredCell,\n  graphData,\n  setGraphData,\n  fetchGraphData,\n  openPopup,\n  handleLabelChange,\n  inputRefs,\n  showHarmonisedColumn,\n  draggedItem,\n  handleDragStart,\n  handleDragEnd,\n  handleDragOver,\n  handleDragLeave,\n  processDragDrop\n}) => {\n  // Function to handle display text - now implemented as a component\n  const getDisplayText = text => {\n    return /*#__PURE__*/_jsxDEV(SafeDisplayText, {\n      text: text\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 12\n    }, this);\n  };\n\n  // Defend against null/undefined inputs\n  const safeRows = Array.isArray(paginatedRows) ? paginatedRows : [];\n  const safeRowSpans = rowSpans || {};\n  const safeClusterCounts = clusterCounts || {};\n  const safeObjectCounts = objectCounts || {};\n  return /*#__PURE__*/_jsxDEV(\"tbody\", {\n    children: safeRows.map((row, index) => {\n      // Ensure row has all required properties\n      if (!row || !row.attr) {\n        console.warn(`Invalid row at index ${index}:`, row);\n        return null;\n      }\n      return /*#__PURE__*/_jsxDEV(TableRow, {\n        row: row,\n        index: index,\n        rowSpans: safeRowSpans,\n        clusterCounts: safeClusterCounts,\n        objectCounts: safeObjectCounts,\n        hoveredRow: hoveredRow,\n        hoveredCell: hoveredCell,\n        setHoveredRow: setHoveredRow,\n        setHoveredCell: setHoveredCell,\n        handleDragStart: (event, key, category) => handleDragStart(event, key, category),\n        handleDragEnd: handleDragEnd,\n        handleDragOver: handleDragOver,\n        handleDragLeave: handleDragLeave,\n        handleDrop: (event, targetKey, targetCategory) => processDragDrop(event, targetKey, targetCategory),\n        openPopup: openPopup,\n        handleClickInput: (key, currentLabel, currentName) => handleClickInput(inputRefs, openPopup, key, currentLabel, currentName),\n        handleLabelChange: handleLabelChange,\n        setInputRef: setInputRef(inputRefs),\n        getDisplayText: getDisplayText,\n        getCellColor: getCellColor,\n        getCellBorderStyle: getCellBorderStyle,\n        showHarmonisedColumn: showHarmonisedColumn\n      }, `row-${row.attr.key || index}`, false, {\n        fileName: _jsxFileName,\n        lineNumber: 113,\n        columnNumber: 11\n      }, this);\n    })\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 104,\n    columnNumber: 5\n  }, this);\n};\n_c2 = TableBody;\nexport default TableBody;\nvar _c, _c2;\n$RefreshReg$(_c, \"SafeDisplayText\");\n$RefreshReg$(_c2, \"TableBody\");","map":{"version":3,"names":["React","TableRow","handleClickInput","setInputRef","getCellColor","getCellBorderStyle","jsxDEV","_jsxDEV","SafeDisplayText","text","safeText","String","lines","split","firstTwoLines","slice","join","truncatedText","substring","style","position","display","width","children","overflow","whiteSpace","maxWidth","marginRight","textOverflow","WebkitLineClamp","WebkitBoxOrient","fileName","_jsxFileName","lineNumber","columnNumber","length","xmlns","height","viewBox","fill","stroke","strokeWidth","strokeLinecap","strokeLinejoin","bottom","right","cursor","color","cx","cy","r","x1","y1","x2","y2","_c","TableBody","paginatedRows","rowSpans","clusterCounts","objectCounts","hoveredRow","hoveredCell","setHoveredRow","setHoveredCell","graphData","setGraphData","fetchGraphData","openPopup","handleLabelChange","inputRefs","showHarmonisedColumn","draggedItem","handleDragStart","handleDragEnd","handleDragOver","handleDragLeave","processDragDrop","getDisplayText","safeRows","Array","isArray","safeRowSpans","safeClusterCounts","safeObjectCounts","map","row","index","attr","console","warn","event","key","category","handleDrop","targetKey","targetCategory","currentLabel","currentName","_c2","$RefreshReg$"],"sources":["C:/Users/R40008/Asset Model Server/python/bim-ai-poc/frontend/src/components/TableVisualization/components/TableBody.js"],"sourcesContent":["import React from 'react';\r\nimport TableRow from '../../TableRow';\r\nimport { handleClickInput, setInputRef } from '../AttributeManagement';\r\nimport { getCellColor, getCellBorderStyle } from '../utils/CellUtils';\r\n\r\n/**\r\n * Safely renders display text with ellipsis\r\n * Fixes the \"Objects are not valid as React child\" error\r\n */\r\nconst SafeDisplayText = ({ text }) => {\r\n  if (!text) return null;\r\n  \r\n  // Safely convert to string and handle line breaks\r\n  const safeText = String(text);\r\n  const lines = safeText.split('\\n');\r\n  const firstTwoLines = lines.slice(0, 2).join('\\n');\r\n  const truncatedText = firstTwoLines.substring(0, 100);\r\n  \r\n  return (\r\n    <div style={{ position: 'relative', display: 'inline-block', width: \"100%\" }}>\r\n      <div \r\n        style={{ \r\n          overflow: 'hidden', \r\n          whiteSpace: 'pre-line', \r\n          maxWidth: \"calc(100% - 20px)\", \r\n          marginRight: \"2px\",\r\n          textOverflow: \"ellipsis\",\r\n          display: \"-webkit-box\",\r\n          WebkitLineClamp: 2,\r\n          WebkitBoxOrient: \"vertical\"\r\n        }}\r\n      >\r\n        {/* Render text directly instead of using dangerouslySetInnerHTML */}\r\n        {truncatedText}\r\n      </div>\r\n      {safeText.length > 100 && (\r\n        <svg \r\n          xmlns=\"http://www.w3.org/2000/svg\" \r\n          width=\"16\" \r\n          height=\"16\" \r\n          viewBox=\"0 0 24 24\" \r\n          fill=\"none\" \r\n          stroke=\"currentColor\" \r\n          strokeWidth=\"2\" \r\n          strokeLinecap=\"round\" \r\n          strokeLinejoin=\"round\"\r\n          style={{ \r\n            position: 'absolute', \r\n            bottom: '2px', \r\n            right: '2px', \r\n            cursor: \"pointer\",\r\n            color: \"#64748b\"\r\n          }}\r\n        >\r\n          <circle cx=\"11\" cy=\"11\" r=\"8\" />\r\n          <line x1=\"21\" y1=\"21\" x2=\"16.65\" y2=\"16.65\" />\r\n          <line x1=\"11\" y1=\"8\" x2=\"11\" y2=\"14\" />\r\n          <line x1=\"8\" y1=\"11\" x2=\"14\" y2=\"11\" />\r\n        </svg>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\n/**\r\n * Component for rendering the table body with rows\r\n * Fixed version that prevents React object rendering issues\r\n */\r\nconst TableBody = ({ \r\n    paginatedRows,\r\n    rowSpans,\r\n    clusterCounts,\r\n    objectCounts,\r\n    hoveredRow,\r\n    hoveredCell,\r\n    setHoveredRow,\r\n    setHoveredCell,\r\n    graphData,\r\n    setGraphData,\r\n    fetchGraphData,\r\n    openPopup,\r\n    handleLabelChange,\r\n    inputRefs,\r\n    showHarmonisedColumn,\r\n    draggedItem,\r\n    handleDragStart,\r\n    handleDragEnd,\r\n    handleDragOver,\r\n    handleDragLeave,\r\n    processDragDrop\r\n}) => {\r\n  // Function to handle display text - now implemented as a component\r\n  const getDisplayText = (text) => {\r\n    return <SafeDisplayText text={text} />;\r\n  };\r\n\r\n  // Defend against null/undefined inputs\r\n  const safeRows = Array.isArray(paginatedRows) ? paginatedRows : [];\r\n  const safeRowSpans = rowSpans || {};\r\n  const safeClusterCounts = clusterCounts || {};\r\n  const safeObjectCounts = objectCounts || {};\r\n\r\n  return (\r\n    <tbody>\r\n      {safeRows.map((row, index) => {\r\n        // Ensure row has all required properties\r\n        if (!row || !row.attr) {\r\n          console.warn(`Invalid row at index ${index}:`, row);\r\n          return null;\r\n        }\r\n\r\n        return (\r\n          <TableRow \r\n            key={`row-${row.attr.key || index}`}\r\n            row={row}\r\n            index={index}\r\n            rowSpans={safeRowSpans}\r\n            clusterCounts={safeClusterCounts}\r\n            objectCounts={safeObjectCounts}\r\n            hoveredRow={hoveredRow}\r\n            hoveredCell={hoveredCell}\r\n            setHoveredRow={setHoveredRow}\r\n            setHoveredCell={setHoveredCell}\r\n            handleDragStart={(event, key, category) => \r\n              handleDragStart(event, key, category)\r\n            }\r\n            handleDragEnd={handleDragEnd}\r\n            handleDragOver={handleDragOver}\r\n            handleDragLeave={handleDragLeave}\r\n            handleDrop={(event, targetKey, targetCategory) => \r\n              processDragDrop(event, targetKey, targetCategory)\r\n            }\r\n            openPopup={openPopup}\r\n            handleClickInput={(key, currentLabel, currentName) => \r\n              handleClickInput(\r\n                inputRefs, \r\n                openPopup, \r\n                key, \r\n                currentLabel, \r\n                currentName\r\n              )\r\n            }\r\n            handleLabelChange={handleLabelChange}\r\n            setInputRef={setInputRef(inputRefs)}\r\n            getDisplayText={getDisplayText}\r\n            getCellColor={getCellColor}\r\n            getCellBorderStyle={getCellBorderStyle}\r\n            showHarmonisedColumn={showHarmonisedColumn}\r\n          />\r\n        );\r\n      })}\r\n    </tbody>\r\n  );\r\n};\r\n\r\nexport default TableBody;"],"mappings":";AAAA,OAAOA,KAAK,MAAM,OAAO;AACzB,OAAOC,QAAQ,MAAM,gBAAgB;AACrC,SAASC,gBAAgB,EAAEC,WAAW,QAAQ,wBAAwB;AACtE,SAASC,YAAY,EAAEC,kBAAkB,QAAQ,oBAAoB;;AAErE;AACA;AACA;AACA;AAHA,SAAAC,MAAA,IAAAC,OAAA;AAIA,MAAMC,eAAe,GAAGA,CAAC;EAAEC;AAAK,CAAC,KAAK;EACpC,IAAI,CAACA,IAAI,EAAE,OAAO,IAAI;;EAEtB;EACA,MAAMC,QAAQ,GAAGC,MAAM,CAACF,IAAI,CAAC;EAC7B,MAAMG,KAAK,GAAGF,QAAQ,CAACG,KAAK,CAAC,IAAI,CAAC;EAClC,MAAMC,aAAa,GAAGF,KAAK,CAACG,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC,CAACC,IAAI,CAAC,IAAI,CAAC;EAClD,MAAMC,aAAa,GAAGH,aAAa,CAACI,SAAS,CAAC,CAAC,EAAE,GAAG,CAAC;EAErD,oBACEX,OAAA;IAAKY,KAAK,EAAE;MAAEC,QAAQ,EAAE,UAAU;MAAEC,OAAO,EAAE,cAAc;MAAEC,KAAK,EAAE;IAAO,CAAE;IAAAC,QAAA,gBAC3EhB,OAAA;MACEY,KAAK,EAAE;QACLK,QAAQ,EAAE,QAAQ;QAClBC,UAAU,EAAE,UAAU;QACtBC,QAAQ,EAAE,mBAAmB;QAC7BC,WAAW,EAAE,KAAK;QAClBC,YAAY,EAAE,UAAU;QACxBP,OAAO,EAAE,aAAa;QACtBQ,eAAe,EAAE,CAAC;QAClBC,eAAe,EAAE;MACnB,CAAE;MAAAP,QAAA,EAGDN;IAAa;MAAAc,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACX,CAAC,EACLxB,QAAQ,CAACyB,MAAM,GAAG,GAAG,iBACpB5B,OAAA;MACE6B,KAAK,EAAC,4BAA4B;MAClCd,KAAK,EAAC,IAAI;MACVe,MAAM,EAAC,IAAI;MACXC,OAAO,EAAC,WAAW;MACnBC,IAAI,EAAC,MAAM;MACXC,MAAM,EAAC,cAAc;MACrBC,WAAW,EAAC,GAAG;MACfC,aAAa,EAAC,OAAO;MACrBC,cAAc,EAAC,OAAO;MACtBxB,KAAK,EAAE;QACLC,QAAQ,EAAE,UAAU;QACpBwB,MAAM,EAAE,KAAK;QACbC,KAAK,EAAE,KAAK;QACZC,MAAM,EAAE,SAAS;QACjBC,KAAK,EAAE;MACT,CAAE;MAAAxB,QAAA,gBAEFhB,OAAA;QAAQyC,EAAE,EAAC,IAAI;QAACC,EAAE,EAAC,IAAI;QAACC,CAAC,EAAC;MAAG;QAAAnB,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAE,CAAC,eAChC3B,OAAA;QAAM4C,EAAE,EAAC,IAAI;QAACC,EAAE,EAAC,IAAI;QAACC,EAAE,EAAC,OAAO;QAACC,EAAE,EAAC;MAAO;QAAAvB,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAE,CAAC,eAC9C3B,OAAA;QAAM4C,EAAE,EAAC,IAAI;QAACC,EAAE,EAAC,GAAG;QAACC,EAAE,EAAC,IAAI;QAACC,EAAE,EAAC;MAAI;QAAAvB,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAE,CAAC,eACvC3B,OAAA;QAAM4C,EAAE,EAAC,GAAG;QAACC,EAAE,EAAC,IAAI;QAACC,EAAE,EAAC,IAAI;QAACC,EAAE,EAAC;MAAI;QAAAvB,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAE,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACpC,CACN;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACE,CAAC;AAEV,CAAC;;AAED;AACA;AACA;AACA;AAHAqB,EAAA,GAvDM/C,eAAe;AA2DrB,MAAMgD,SAAS,GAAGA,CAAC;EACfC,aAAa;EACbC,QAAQ;EACRC,aAAa;EACbC,YAAY;EACZC,UAAU;EACVC,WAAW;EACXC,aAAa;EACbC,cAAc;EACdC,SAAS;EACTC,YAAY;EACZC,cAAc;EACdC,SAAS;EACTC,iBAAiB;EACjBC,SAAS;EACTC,oBAAoB;EACpBC,WAAW;EACXC,eAAe;EACfC,aAAa;EACbC,cAAc;EACdC,eAAe;EACfC;AACJ,CAAC,KAAK;EACJ;EACA,MAAMC,cAAc,GAAIrE,IAAI,IAAK;IAC/B,oBAAOF,OAAA,CAACC,eAAe;MAACC,IAAI,EAAEA;IAAK;MAAAsB,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAE,CAAC;EACxC,CAAC;;EAED;EACA,MAAM6C,QAAQ,GAAGC,KAAK,CAACC,OAAO,CAACxB,aAAa,CAAC,GAAGA,aAAa,GAAG,EAAE;EAClE,MAAMyB,YAAY,GAAGxB,QAAQ,IAAI,CAAC,CAAC;EACnC,MAAMyB,iBAAiB,GAAGxB,aAAa,IAAI,CAAC,CAAC;EAC7C,MAAMyB,gBAAgB,GAAGxB,YAAY,IAAI,CAAC,CAAC;EAE3C,oBACErD,OAAA;IAAAgB,QAAA,EACGwD,QAAQ,CAACM,GAAG,CAAC,CAACC,GAAG,EAAEC,KAAK,KAAK;MAC5B;MACA,IAAI,CAACD,GAAG,IAAI,CAACA,GAAG,CAACE,IAAI,EAAE;QACrBC,OAAO,CAACC,IAAI,CAAC,wBAAwBH,KAAK,GAAG,EAAED,GAAG,CAAC;QACnD,OAAO,IAAI;MACb;MAEA,oBACE/E,OAAA,CAACN,QAAQ;QAEPqF,GAAG,EAAEA,GAAI;QACTC,KAAK,EAAEA,KAAM;QACb7B,QAAQ,EAAEwB,YAAa;QACvBvB,aAAa,EAAEwB,iBAAkB;QACjCvB,YAAY,EAAEwB,gBAAiB;QAC/BvB,UAAU,EAAEA,UAAW;QACvBC,WAAW,EAAEA,WAAY;QACzBC,aAAa,EAAEA,aAAc;QAC7BC,cAAc,EAAEA,cAAe;QAC/BS,eAAe,EAAEA,CAACkB,KAAK,EAAEC,GAAG,EAAEC,QAAQ,KACpCpB,eAAe,CAACkB,KAAK,EAAEC,GAAG,EAAEC,QAAQ,CACrC;QACDnB,aAAa,EAAEA,aAAc;QAC7BC,cAAc,EAAEA,cAAe;QAC/BC,eAAe,EAAEA,eAAgB;QACjCkB,UAAU,EAAEA,CAACH,KAAK,EAAEI,SAAS,EAAEC,cAAc,KAC3CnB,eAAe,CAACc,KAAK,EAAEI,SAAS,EAAEC,cAAc,CACjD;QACD5B,SAAS,EAAEA,SAAU;QACrBlE,gBAAgB,EAAEA,CAAC0F,GAAG,EAAEK,YAAY,EAAEC,WAAW,KAC/ChG,gBAAgB,CACdoE,SAAS,EACTF,SAAS,EACTwB,GAAG,EACHK,YAAY,EACZC,WACF,CACD;QACD7B,iBAAiB,EAAEA,iBAAkB;QACrClE,WAAW,EAAEA,WAAW,CAACmE,SAAS,CAAE;QACpCQ,cAAc,EAAEA,cAAe;QAC/B1E,YAAY,EAAEA,YAAa;QAC3BC,kBAAkB,EAAEA,kBAAmB;QACvCkE,oBAAoB,EAAEA;MAAqB,GAlCtC,OAAOe,GAAG,CAACE,IAAI,CAACI,GAAG,IAAIL,KAAK,EAAE;QAAAxD,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAmCpC,CAAC;IAEN,CAAC;EAAC;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACG,CAAC;AAEZ,CAAC;AAACiE,GAAA,GArFI3C,SAAS;AAuFf,eAAeA,SAAS;AAAC,IAAAD,EAAA,EAAA4C,GAAA;AAAAC,YAAA,CAAA7C,EAAA;AAAA6C,YAAA,CAAAD,GAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}