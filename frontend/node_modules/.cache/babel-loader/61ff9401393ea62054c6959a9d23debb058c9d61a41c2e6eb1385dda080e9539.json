{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\R40008\\\\Asset Model Server\\\\python\\\\bim-ai-poc\\\\frontend\\\\src\\\\components\\\\GraphVisualization.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from 'react';\nimport ReactFlow, { Background, Controls, MiniMap, Position } from 'reactflow';\nimport 'reactflow/dist/style.css';\n\n// Cluster Node Component\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst ClusterNode = ({\n  data\n}) => {\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"cluster-node\",\n    style: {\n      padding: '10px',\n      borderRadius: '5px',\n      background: 'linear-gradient(to bottom, #1E40AF, #3B82F6)',\n      color: 'white',\n      width: '180px',\n      boxShadow: '0 4px 6px rgba(0, 0, 0, 0.1)',\n      border: '2px solid #1E3A8A'\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        display: 'flex',\n        alignItems: 'center',\n        gap: '8px'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          width: '16px',\n          height: '16px',\n          borderRadius: '50%',\n          backgroundColor: 'white'\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 24,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          fontWeight: 'bold',\n          fontSize: '14px',\n          textAlign: 'center'\n        },\n        children: data.label\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 30,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 23,\n      columnNumber: 7\n    }, this), data.hoverLabel && /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        marginTop: '8px',\n        fontSize: '12px',\n        backgroundColor: 'rgba(255, 255, 255, 0.2)',\n        padding: '4px',\n        borderRadius: '3px'\n      },\n      children: data.hoverLabel\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 37,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 13,\n    columnNumber: 5\n  }, this);\n};\n\n// Object Node as Table Component\n_c = ClusterNode;\nconst ObjectTableNode = ({\n  data\n}) => {\n  // Ensure harmonizedAttributes is an array\n  const harmonizedAttributes = Array.isArray(data.harmonizedAttributes) ? data.harmonizedAttributes : [];\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"object-table-node\",\n    style: {\n      padding: '10px',\n      borderRadius: '8px',\n      backgroundColor: 'white',\n      color: '#1e293b',\n      minWidth: '280px',\n      boxShadow: '0 4px 6px rgba(0, 0, 0, 0.1)',\n      border: '2px solid #10B981'\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        backgroundColor: '#10B981',\n        color: 'white',\n        padding: '8px 12px',\n        borderTopLeftRadius: '6px',\n        borderTopRightRadius: '6px',\n        display: 'flex',\n        alignItems: 'center',\n        gap: '8px',\n        marginBottom: '8px'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          width: '0',\n          height: '0',\n          borderLeft: '7px solid transparent',\n          borderRight: '7px solid transparent',\n          borderBottom: '14px solid white'\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          fontWeight: 'bold',\n          fontSize: '14px'\n        },\n        children: data.label\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 7\n    }, this), data.hoverLabel && /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        fontSize: '12px',\n        padding: '0 8px 8px 8px',\n        color: '#64748b',\n        borderBottom: '1px solid #e2e8f0'\n      },\n      children: data.hoverLabel\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        marginTop: '8px',\n        maxHeight: '200px',\n        overflowY: 'auto'\n      },\n      children: /*#__PURE__*/_jsxDEV(\"table\", {\n        style: {\n          width: '100%',\n          borderCollapse: 'collapse',\n          fontSize: '12px'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n          children: /*#__PURE__*/_jsxDEV(\"tr\", {\n            style: {\n              backgroundColor: '#f8fafc'\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"th\", {\n              style: {\n                padding: '6px 8px',\n                textAlign: 'left',\n                borderBottom: '1px solid #e2e8f0'\n              },\n              children: \"Attribute\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 111,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              style: {\n                padding: '6px 8px',\n                textAlign: 'left',\n                borderBottom: '1px solid #e2e8f0'\n              },\n              children: \"Value\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 116,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 110,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 109,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n          children: harmonizedAttributes.length > 0 ? harmonizedAttributes.map((attr, index) => {\n            // Ensure attr is an object and has label/value properties\n            const label = typeof attr === 'object' && attr.label ? attr.label : 'Unknown';\n            const value = typeof attr === 'object' && attr.value ? attr.value : '-';\n            return /*#__PURE__*/_jsxDEV(\"tr\", {\n              style: {\n                backgroundColor: index % 2 === 0 ? 'white' : '#f8fafc'\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                style: {\n                  padding: '6px 8px',\n                  borderBottom: '1px solid #e2e8f0',\n                  color: '#8B5CF6',\n                  fontWeight: 500\n                },\n                children: label\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 134,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                style: {\n                  padding: '6px 8px',\n                  borderBottom: '1px solid #e2e8f0'\n                },\n                children: value\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 140,\n                columnNumber: 21\n              }, this)]\n            }, index, true, {\n              fileName: _jsxFileName,\n              lineNumber: 131,\n              columnNumber: 19\n            }, this);\n          }) : /*#__PURE__*/_jsxDEV(\"tr\", {\n            children: /*#__PURE__*/_jsxDEV(\"td\", {\n              colSpan: \"2\",\n              style: {\n                padding: '8px',\n                textAlign: 'center',\n                color: '#94a3b8'\n              },\n              children: \"No attributes available\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 149,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 148,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 123,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 57,\n    columnNumber: 5\n  }, this);\n};\n\n// Define node types\n_c2 = ObjectTableNode;\nconst nodeTypes = {\n  cluster: ClusterNode,\n  objectTable: ObjectTableNode\n};\nconst GraphVisualization = ({\n  graphData,\n  dimensions,\n  onInit\n}) => {\n  _s();\n  const [nodes, setNodes] = useState([]);\n  const [edges, setEdges] = useState([]);\n\n  // Process graph data to create React Flow nodes and edges\n  useEffect(() => {\n    if (graphData && graphData.nodeDataArray && graphData.linkDataArray) {\n      // Process the data to group harmonized attributes by object\n      const processedData = processGraphData(graphData);\n      setNodes(processedData.nodes);\n      setEdges(processedData.edges);\n    }\n  }, [graphData]);\n\n  // Process graph data to create table view\n  const processGraphData = data => {\n    if (!data || !data.nodeDataArray || !data.linkDataArray) {\n      return {\n        nodes: [],\n        edges: []\n      };\n    }\n    const originalNodes = [...data.nodeDataArray];\n    const originalLinks = [...data.linkDataArray];\n\n    // Extract nodes by type\n    const clusters = originalNodes.filter(node => node.category === \"system\");\n    const objects = originalNodes.filter(node => node.category === \"object\");\n    const attributes = originalNodes.filter(node => node.category === \"attribute\");\n\n    // Create a mapping of object keys to their harmonized attributes\n    const objectToHarmonizedAttributes = {};\n\n    // First, find all links from objects to attributes\n    originalLinks.forEach(link => {\n      const sourceNode = originalNodes.find(node => node.key === link.from);\n      const targetNode = originalNodes.find(node => node.key === link.to);\n      if (sourceNode && targetNode && sourceNode.category === \"object\" && targetNode.category === \"attribute\") {\n        if (!objectToHarmonizedAttributes[sourceNode.key]) {\n          objectToHarmonizedAttributes[sourceNode.key] = [];\n        }\n\n        // Get the harmonized attribute name\n        const harmonizedName = targetNode.harmonisedAttribute || `Harmonised-${targetNode.label}`;\n\n        // Add to the object's harmonized attributes if not already present\n        const existingAttr = objectToHarmonizedAttributes[sourceNode.key].find(attr => attr.label === harmonizedName);\n        if (!existingAttr) {\n          objectToHarmonizedAttributes[sourceNode.key].push({\n            label: harmonizedName || 'Unknown',\n            originalAttribute: targetNode.label || 'Unknown',\n            hoverLabel: targetNode.hoverLabel || '',\n            value: targetNode.hoverLabel || 'Sample Value'\n          });\n        }\n      }\n    });\n\n    // Create flow nodes\n    const flowNodes = [];\n\n    // Position variables\n    let yPosition = 0;\n    const LEVEL_HEIGHT = 300;\n    const NODE_WIDTH = 280;\n\n    // Add cluster nodes (top level)\n    let clusterPositions = {};\n    clusters.forEach((cluster, index) => {\n      const xPosition = index * NODE_WIDTH * 1.5 - (clusters.length - 1) * NODE_WIDTH * 0.75;\n      const nodeId = cluster.key;\n      flowNodes.push({\n        id: nodeId,\n        type: 'cluster',\n        position: {\n          x: xPosition,\n          y: yPosition\n        },\n        data: {\n          label: cluster.label || 'Unnamed Cluster',\n          hoverLabel: cluster.hoverLabel || ''\n        },\n        sourcePosition: Position.Bottom,\n        targetPosition: Position.Top\n      });\n      clusterPositions[nodeId] = xPosition;\n    });\n\n    // Move to next level for object tables\n    yPosition += LEVEL_HEIGHT;\n\n    // First, organize objects by their parent cluster\n    const objectsByCluster = {};\n    originalLinks.forEach(link => {\n      const sourceNode = originalNodes.find(node => node.key === link.from);\n      const targetNode = originalNodes.find(node => node.key === link.to);\n      if (sourceNode && targetNode && sourceNode.category === \"system\" && targetNode.category === \"object\") {\n        if (!objectsByCluster[sourceNode.key]) {\n          objectsByCluster[sourceNode.key] = [];\n        }\n        objectsByCluster[sourceNode.key].push(targetNode);\n      }\n    });\n\n    // Create flow edges\n    const flowEdges = [];\n\n    // Add object table nodes (bottom level)\n    Object.entries(objectsByCluster).forEach(([clusterId, clusterObjects]) => {\n      const clusterXPosition = clusterPositions[clusterId];\n      const objectCount = clusterObjects.length;\n      clusterObjects.forEach((object, index) => {\n        // Position objects below their parent cluster, with spacing\n        const xOffset = (index - (objectCount - 1) / 2) * NODE_WIDTH * 1.5;\n        const xPosition = clusterXPosition + xOffset;\n        const nodeId = object.key;\n        flowNodes.push({\n          id: nodeId,\n          type: 'objectTable',\n          position: {\n            x: xPosition,\n            y: yPosition\n          },\n          data: {\n            label: object.label || 'Unnamed Object',\n            hoverLabel: object.hoverLabel || '',\n            harmonizedAttributes: objectToHarmonizedAttributes[nodeId] || []\n          },\n          sourcePosition: Position.Bottom,\n          targetPosition: Position.Top\n        });\n\n        // Add edge from cluster to object\n        flowEdges.push({\n          id: `${clusterId}-${nodeId}`,\n          source: clusterId,\n          target: nodeId,\n          animated: false,\n          style: {\n            stroke: '#555',\n            strokeWidth: 2\n          },\n          type: 'smoothstep'\n        });\n      });\n    });\n    return {\n      nodes: flowNodes,\n      edges: flowEdges\n    };\n  };\n\n  // Handle on init to pass back React Flow instance\n  const handleInit = reactFlowInstance => {\n    if (onInit) {\n      onInit(reactFlowInstance);\n    }\n\n    // Fit view\n    setTimeout(() => {\n      reactFlowInstance.fitView({\n        padding: 0.2\n      });\n    }, 100);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      width: (dimensions === null || dimensions === void 0 ? void 0 : dimensions.width) || '100%',\n      height: (dimensions === null || dimensions === void 0 ? void 0 : dimensions.height) || '600px',\n      border: '1px solid #e2e8f0',\n      borderRadius: '8px'\n    },\n    children: graphData ? /*#__PURE__*/_jsxDEV(ReactFlow, {\n      nodes: nodes,\n      edges: edges,\n      nodeTypes: nodeTypes,\n      fitView: true,\n      onInit: handleInit,\n      minZoom: 0.2,\n      maxZoom: 2,\n      children: [/*#__PURE__*/_jsxDEV(Controls, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 351,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(MiniMap, {\n        nodeStrokeWidth: 3,\n        zoomable: true,\n        pannable: true,\n        nodeColor: node => {\n          if (node.type === 'cluster') return '#3B82F6';\n          return '#10B981';\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 352,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(Background, {\n        variant: \"dots\",\n        gap: 12,\n        size: 1\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 361,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 342,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        display: \"flex\",\n        alignItems: \"center\",\n        justifyContent: \"center\",\n        height: \"100%\",\n        color: \"#64748b\",\n        fontSize: \"16px\",\n        fontStyle: \"italic\",\n        background: \"#f8fafc\"\n      },\n      children: \"Graph will be displayed here after uploading a file.\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 364,\n      columnNumber: 9\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 335,\n    columnNumber: 5\n  }, this);\n};\n_s(GraphVisualization, \"qOdGaiImnCja3mNU5uxxCrNYw9I=\");\n_c3 = GraphVisualization;\nexport default GraphVisualization;\nvar _c, _c2, _c3;\n$RefreshReg$(_c, \"ClusterNode\");\n$RefreshReg$(_c2, \"ObjectTableNode\");\n$RefreshReg$(_c3, \"GraphVisualization\");","map":{"version":3,"names":["React","useEffect","useState","ReactFlow","Background","Controls","MiniMap","Position","jsxDEV","_jsxDEV","ClusterNode","data","className","style","padding","borderRadius","background","color","width","boxShadow","border","children","display","alignItems","gap","height","backgroundColor","fileName","_jsxFileName","lineNumber","columnNumber","fontWeight","fontSize","textAlign","label","hoverLabel","marginTop","_c","ObjectTableNode","harmonizedAttributes","Array","isArray","minWidth","borderTopLeftRadius","borderTopRightRadius","marginBottom","borderLeft","borderRight","borderBottom","maxHeight","overflowY","borderCollapse","length","map","attr","index","value","colSpan","_c2","nodeTypes","cluster","objectTable","GraphVisualization","graphData","dimensions","onInit","_s","nodes","setNodes","edges","setEdges","nodeDataArray","linkDataArray","processedData","processGraphData","originalNodes","originalLinks","clusters","filter","node","category","objects","attributes","objectToHarmonizedAttributes","forEach","link","sourceNode","find","key","from","targetNode","to","harmonizedName","harmonisedAttribute","existingAttr","push","originalAttribute","flowNodes","yPosition","LEVEL_HEIGHT","NODE_WIDTH","clusterPositions","xPosition","nodeId","id","type","position","x","y","sourcePosition","Bottom","targetPosition","Top","objectsByCluster","flowEdges","Object","entries","clusterId","clusterObjects","clusterXPosition","objectCount","object","xOffset","source","target","animated","stroke","strokeWidth","handleInit","reactFlowInstance","setTimeout","fitView","minZoom","maxZoom","nodeStrokeWidth","zoomable","pannable","nodeColor","variant","size","justifyContent","fontStyle","_c3","$RefreshReg$"],"sources":["C:/Users/R40008/Asset Model Server/python/bim-ai-poc/frontend/src/components/GraphVisualization.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport ReactFlow, {\r\n  Background,\r\n  Controls,\r\n  MiniMap,\r\n  Position\r\n} from 'reactflow';\r\nimport 'reactflow/dist/style.css';\r\n\r\n// Cluster Node Component\r\nconst ClusterNode = ({ data }) => {\r\n  return (\r\n    <div className=\"cluster-node\" \r\n      style={{\r\n        padding: '10px',\r\n        borderRadius: '5px',\r\n        background: 'linear-gradient(to bottom, #1E40AF, #3B82F6)',\r\n        color: 'white',\r\n        width: '180px',\r\n        boxShadow: '0 4px 6px rgba(0, 0, 0, 0.1)',\r\n        border: '2px solid #1E3A8A'\r\n      }}>\r\n      <div style={{ display: 'flex', alignItems: 'center', gap: '8px' }}>\r\n        <div style={{ \r\n          width: '16px', \r\n          height: '16px', \r\n          borderRadius: '50%', \r\n          backgroundColor: 'white' \r\n        }}></div>\r\n        <div style={{\r\n          fontWeight: 'bold',\r\n          fontSize: '14px',\r\n          textAlign: 'center'\r\n        }}>{data.label}</div>\r\n      </div>\r\n      {data.hoverLabel && (\r\n        <div style={{\r\n          marginTop: '8px',\r\n          fontSize: '12px',\r\n          backgroundColor: 'rgba(255, 255, 255, 0.2)',\r\n          padding: '4px',\r\n          borderRadius: '3px'\r\n        }}>{data.hoverLabel}</div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\n// Object Node as Table Component\r\nconst ObjectTableNode = ({ data }) => {\r\n  // Ensure harmonizedAttributes is an array\r\n  const harmonizedAttributes = Array.isArray(data.harmonizedAttributes) \r\n    ? data.harmonizedAttributes \r\n    : [];\r\n  \r\n  return (\r\n    <div className=\"object-table-node\"\r\n      style={{\r\n        padding: '10px',\r\n        borderRadius: '8px',\r\n        backgroundColor: 'white',\r\n        color: '#1e293b',\r\n        minWidth: '280px',\r\n        boxShadow: '0 4px 6px rgba(0, 0, 0, 0.1)',\r\n        border: '2px solid #10B981'\r\n      }}>\r\n      {/* Table Header */}\r\n      <div style={{\r\n        backgroundColor: '#10B981',\r\n        color: 'white',\r\n        padding: '8px 12px',\r\n        borderTopLeftRadius: '6px',\r\n        borderTopRightRadius: '6px',\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n        gap: '8px',\r\n        marginBottom: '8px'\r\n      }}>\r\n        <div style={{\r\n          width: '0',\r\n          height: '0',\r\n          borderLeft: '7px solid transparent',\r\n          borderRight: '7px solid transparent',\r\n          borderBottom: '14px solid white'\r\n        }}></div>\r\n        <div style={{\r\n          fontWeight: 'bold',\r\n          fontSize: '14px'\r\n        }}>{data.label}</div>\r\n      </div>\r\n      \r\n      {/* Table Description if available */}\r\n      {data.hoverLabel && (\r\n        <div style={{\r\n          fontSize: '12px',\r\n          padding: '0 8px 8px 8px',\r\n          color: '#64748b',\r\n          borderBottom: '1px solid #e2e8f0'\r\n        }}>{data.hoverLabel}</div>\r\n      )}\r\n      \r\n      {/* Harmonized Attributes Table */}\r\n      <div style={{ marginTop: '8px', maxHeight: '200px', overflowY: 'auto' }}>\r\n        <table style={{ \r\n          width: '100%', \r\n          borderCollapse: 'collapse',\r\n          fontSize: '12px'\r\n        }}>\r\n          <thead>\r\n            <tr style={{ backgroundColor: '#f8fafc' }}>\r\n              <th style={{ \r\n                padding: '6px 8px', \r\n                textAlign: 'left', \r\n                borderBottom: '1px solid #e2e8f0' \r\n              }}>Attribute</th>\r\n              <th style={{ \r\n                padding: '6px 8px', \r\n                textAlign: 'left', \r\n                borderBottom: '1px solid #e2e8f0' \r\n              }}>Value</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            {harmonizedAttributes.length > 0 ? (\r\n              harmonizedAttributes.map((attr, index) => {\r\n                // Ensure attr is an object and has label/value properties\r\n                const label = typeof attr === 'object' && attr.label ? attr.label : 'Unknown';\r\n                const value = typeof attr === 'object' && attr.value ? attr.value : '-';\r\n\r\n                return (\r\n                  <tr key={index} style={{ \r\n                    backgroundColor: index % 2 === 0 ? 'white' : '#f8fafc'\r\n                  }}>\r\n                    <td style={{ \r\n                      padding: '6px 8px', \r\n                      borderBottom: '1px solid #e2e8f0',\r\n                      color: '#8B5CF6',\r\n                      fontWeight: 500\r\n                    }}>{label}</td>\r\n                    <td style={{ \r\n                      padding: '6px 8px', \r\n                      borderBottom: '1px solid #e2e8f0'\r\n                    }}>{value}</td>\r\n                  </tr>\r\n                );\r\n              })\r\n            ) : (\r\n              <tr>\r\n                <td colSpan=\"2\" style={{ \r\n                  padding: '8px', \r\n                  textAlign: 'center',\r\n                  color: '#94a3b8'\r\n                }}>No attributes available</td>\r\n              </tr>\r\n            )}\r\n          </tbody>\r\n        </table>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\n// Define node types\r\nconst nodeTypes = {\r\n  cluster: ClusterNode,\r\n  objectTable: ObjectTableNode\r\n};\r\n\r\nconst GraphVisualization = ({ graphData, dimensions, onInit }) => {\r\n  const [nodes, setNodes] = useState([]);\r\n  const [edges, setEdges] = useState([]);\r\n\r\n  // Process graph data to create React Flow nodes and edges\r\n  useEffect(() => {\r\n    if (graphData && graphData.nodeDataArray && graphData.linkDataArray) {\r\n      // Process the data to group harmonized attributes by object\r\n      const processedData = processGraphData(graphData);\r\n      \r\n      setNodes(processedData.nodes);\r\n      setEdges(processedData.edges);\r\n    }\r\n  }, [graphData]);\r\n\r\n  // Process graph data to create table view\r\n  const processGraphData = (data) => {\r\n    if (!data || !data.nodeDataArray || !data.linkDataArray) {\r\n      return { nodes: [], edges: [] };\r\n    }\r\n\r\n    const originalNodes = [...data.nodeDataArray];\r\n    const originalLinks = [...data.linkDataArray];\r\n    \r\n    // Extract nodes by type\r\n    const clusters = originalNodes.filter(node => node.category === \"system\");\r\n    const objects = originalNodes.filter(node => node.category === \"object\");\r\n    const attributes = originalNodes.filter(node => node.category === \"attribute\");\r\n    \r\n    // Create a mapping of object keys to their harmonized attributes\r\n    const objectToHarmonizedAttributes = {};\r\n    \r\n    // First, find all links from objects to attributes\r\n    originalLinks.forEach(link => {\r\n      const sourceNode = originalNodes.find(node => node.key === link.from);\r\n      const targetNode = originalNodes.find(node => node.key === link.to);\r\n      \r\n      if (sourceNode && targetNode && \r\n          sourceNode.category === \"object\" && \r\n          targetNode.category === \"attribute\") {\r\n        \r\n        if (!objectToHarmonizedAttributes[sourceNode.key]) {\r\n          objectToHarmonizedAttributes[sourceNode.key] = [];\r\n        }\r\n        \r\n        // Get the harmonized attribute name\r\n        const harmonizedName = targetNode.harmonisedAttribute || `Harmonised-${targetNode.label}`;\r\n        \r\n        // Add to the object's harmonized attributes if not already present\r\n        const existingAttr = objectToHarmonizedAttributes[sourceNode.key]\r\n          .find(attr => attr.label === harmonizedName);\r\n          \r\n        if (!existingAttr) {\r\n          objectToHarmonizedAttributes[sourceNode.key].push({\r\n            label: harmonizedName || 'Unknown',\r\n            originalAttribute: targetNode.label || 'Unknown',\r\n            hoverLabel: targetNode.hoverLabel || '',\r\n            value: targetNode.hoverLabel || 'Sample Value'\r\n          });\r\n        }\r\n      }\r\n    });\r\n    \r\n    // Create flow nodes\r\n    const flowNodes = [];\r\n    \r\n    // Position variables\r\n    let yPosition = 0;\r\n    const LEVEL_HEIGHT = 300;\r\n    const NODE_WIDTH = 280;\r\n    \r\n    // Add cluster nodes (top level)\r\n    let clusterPositions = {};\r\n    clusters.forEach((cluster, index) => {\r\n      const xPosition = (index * NODE_WIDTH * 1.5) - ((clusters.length - 1) * NODE_WIDTH * 0.75);\r\n      const nodeId = cluster.key;\r\n      \r\n      flowNodes.push({\r\n        id: nodeId,\r\n        type: 'cluster',\r\n        position: { x: xPosition, y: yPosition },\r\n        data: { \r\n          label: cluster.label || 'Unnamed Cluster',\r\n          hoverLabel: cluster.hoverLabel || ''\r\n        },\r\n        sourcePosition: Position.Bottom,\r\n        targetPosition: Position.Top\r\n      });\r\n      \r\n      clusterPositions[nodeId] = xPosition;\r\n    });\r\n    \r\n    // Move to next level for object tables\r\n    yPosition += LEVEL_HEIGHT;\r\n    \r\n    // First, organize objects by their parent cluster\r\n    const objectsByCluster = {};\r\n    originalLinks.forEach(link => {\r\n      const sourceNode = originalNodes.find(node => node.key === link.from);\r\n      const targetNode = originalNodes.find(node => node.key === link.to);\r\n      \r\n      if (sourceNode && targetNode && \r\n          sourceNode.category === \"system\" && \r\n          targetNode.category === \"object\") {\r\n        if (!objectsByCluster[sourceNode.key]) {\r\n          objectsByCluster[sourceNode.key] = [];\r\n        }\r\n        objectsByCluster[sourceNode.key].push(targetNode);\r\n      }\r\n    });\r\n    \r\n    // Create flow edges\r\n    const flowEdges = [];\r\n    \r\n    // Add object table nodes (bottom level)\r\n    Object.entries(objectsByCluster).forEach(([clusterId, clusterObjects]) => {\r\n      const clusterXPosition = clusterPositions[clusterId];\r\n      const objectCount = clusterObjects.length;\r\n      \r\n      clusterObjects.forEach((object, index) => {\r\n        // Position objects below their parent cluster, with spacing\r\n        const xOffset = ((index - (objectCount - 1) / 2) * NODE_WIDTH * 1.5);\r\n        const xPosition = clusterXPosition + xOffset;\r\n        const nodeId = object.key;\r\n        \r\n        flowNodes.push({\r\n          id: nodeId,\r\n          type: 'objectTable',\r\n          position: { x: xPosition, y: yPosition },\r\n          data: { \r\n            label: object.label || 'Unnamed Object',\r\n            hoverLabel: object.hoverLabel || '',\r\n            harmonizedAttributes: objectToHarmonizedAttributes[nodeId] || []\r\n          },\r\n          sourcePosition: Position.Bottom,\r\n          targetPosition: Position.Top\r\n        });\r\n        \r\n        // Add edge from cluster to object\r\n        flowEdges.push({\r\n          id: `${clusterId}-${nodeId}`,\r\n          source: clusterId,\r\n          target: nodeId,\r\n          animated: false,\r\n          style: { stroke: '#555', strokeWidth: 2 },\r\n          type: 'smoothstep'\r\n        });\r\n      });\r\n    });\r\n    \r\n    return { nodes: flowNodes, edges: flowEdges };\r\n  };\r\n\r\n  // Handle on init to pass back React Flow instance\r\n  const handleInit = (reactFlowInstance) => {\r\n    if (onInit) {\r\n      onInit(reactFlowInstance);\r\n    }\r\n    \r\n    // Fit view\r\n    setTimeout(() => {\r\n      reactFlowInstance.fitView({ padding: 0.2 });\r\n    }, 100);\r\n  };\r\n\r\n  return (\r\n    <div style={{ \r\n      width: dimensions?.width || '100%', \r\n      height: dimensions?.height || '600px', \r\n      border: '1px solid #e2e8f0',\r\n      borderRadius: '8px'\r\n    }}>\r\n      {graphData ? (\r\n        <ReactFlow\r\n          nodes={nodes}\r\n          edges={edges}\r\n          nodeTypes={nodeTypes}\r\n          fitView\r\n          onInit={handleInit}\r\n          minZoom={0.2}\r\n          maxZoom={2}\r\n        >\r\n          <Controls />\r\n          <MiniMap \r\n            nodeStrokeWidth={3}\r\n            zoomable\r\n            pannable\r\n            nodeColor={(node) => {\r\n              if (node.type === 'cluster') return '#3B82F6';\r\n              return '#10B981';\r\n            }}\r\n          />\r\n          <Background variant=\"dots\" gap={12} size={1} />\r\n        </ReactFlow>\r\n      ) : (\r\n        <div style={{\r\n          display: \"flex\",\r\n          alignItems: \"center\",\r\n          justifyContent: \"center\",\r\n          height: \"100%\",\r\n          color: \"#64748b\",\r\n          fontSize: \"16px\",\r\n          fontStyle: \"italic\",\r\n          background: \"#f8fafc\"\r\n        }}>\r\n          Graph will be displayed here after uploading a file.\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default GraphVisualization;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}