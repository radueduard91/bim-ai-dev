{"ast":null,"code":"import React from 'react';\nimport axios from 'axios';\nimport { v4 as uuidv4 } from 'uuid';\nexport const addNewAttribute = async (graphData, setGraphData, fetchGraphData, setConfirmPopup, showNotification) => {\n  setConfirmPopup({\n    isOpen: false\n  });\n  if (!graphData || !graphData.nodeDataArray) {\n    if (showNotification) {\n      showNotification(\"No data available. Please upload a file first.\", \"error\");\n    }\n    return;\n  }\n  try {\n    // Generate a new unique ID for the attribute\n    const newAttributeKey = uuidv4();\n\n    // Create new attribute object\n    const newAttribute = {\n      key: newAttributeKey,\n      category: \"attribute\",\n      label: \"New Attribute\",\n      hoverLabel: \"New Attribute Description\",\n      harmonisedAttribute: \"Harmonised-New-Attribute\"\n    };\n\n    // Create a new updated graph data object\n    const updatedGraphData = {\n      nodeDataArray: [...graphData.nodeDataArray, newAttribute],\n      linkDataArray: [...graphData.linkDataArray]\n    };\n\n    // Update local state\n    setGraphData(updatedGraphData);\n\n    // For debugging\n    console.log(\"Added new attribute:\", newAttribute);\n    console.log(\"Updated graph data:\", updatedGraphData);\n\n    // Show success notification\n    if (showNotification) {\n      showNotification(\"New attribute created successfully\", \"success\");\n    }\n  } catch (error) {\n    console.error(\"Error adding new Attribute:\", error);\n    if (showNotification) {\n      showNotification(\"Error creating new attribute\", \"error\");\n    }\n  }\n};\nexport const handleClickInput = (inputRefs, openPopup, key, currentLabel, currentName) => {\n  openPopup(key, currentLabel, currentName);\n  if (inputRefs.current[key] && inputRefs.current[key].current) {\n    inputRefs.current[key].current.focus();\n  }\n};\nexport const setInputRef = inputRefs => {\n  return key => {\n    if (!inputRefs.current[key]) {\n      inputRefs.current[key] = /*#__PURE__*/React.createRef();\n    }\n    return inputRefs.current[key];\n  };\n};","map":{"version":3,"names":["React","axios","v4","uuidv4","addNewAttribute","graphData","setGraphData","fetchGraphData","setConfirmPopup","showNotification","isOpen","nodeDataArray","newAttributeKey","newAttribute","key","category","label","hoverLabel","harmonisedAttribute","updatedGraphData","linkDataArray","console","log","error","handleClickInput","inputRefs","openPopup","currentLabel","currentName","current","focus","setInputRef","createRef"],"sources":["C:/Users/R40008/Asset Model Server/python/bim-ai-poc/frontend/src/components/TableVisualization/AttributeManagement.js"],"sourcesContent":["import React from 'react';\r\nimport axios from 'axios';\r\nimport { v4 as uuidv4 } from 'uuid';\r\n\r\nexport const addNewAttribute = async (\r\n    graphData, \r\n    setGraphData, \r\n    fetchGraphData, \r\n    setConfirmPopup,\r\n    showNotification\r\n) => {\r\n    setConfirmPopup({ isOpen: false });\r\n    \r\n    if (!graphData || !graphData.nodeDataArray) {\r\n        if (showNotification) {\r\n            showNotification(\"No data available. Please upload a file first.\", \"error\");\r\n        }\r\n        return;\r\n    }\r\n    \r\n    try {\r\n        // Generate a new unique ID for the attribute\r\n        const newAttributeKey = uuidv4();\r\n        \r\n        // Create new attribute object\r\n        const newAttribute = {\r\n            key: newAttributeKey,\r\n            category: \"attribute\",\r\n            label: \"New Attribute\",\r\n            hoverLabel: \"New Attribute Description\",\r\n            harmonisedAttribute: \"Harmonised-New-Attribute\"\r\n        };\r\n        \r\n        // Create a new updated graph data object\r\n        const updatedGraphData = {\r\n            nodeDataArray: [...graphData.nodeDataArray, newAttribute],\r\n            linkDataArray: [...graphData.linkDataArray]\r\n        };\r\n        \r\n        // Update local state\r\n        setGraphData(updatedGraphData);\r\n        \r\n        // For debugging\r\n        console.log(\"Added new attribute:\", newAttribute);\r\n        console.log(\"Updated graph data:\", updatedGraphData);\r\n        \r\n        // Show success notification\r\n        if (showNotification) {\r\n            showNotification(\"New attribute created successfully\", \"success\");\r\n        }\r\n        \r\n    } catch (error) {\r\n        console.error(\"Error adding new Attribute:\", error);\r\n        if (showNotification) {\r\n            showNotification(\"Error creating new attribute\", \"error\");\r\n        }\r\n    }\r\n};\r\n\r\nexport const handleClickInput = (inputRefs, openPopup, key, currentLabel, currentName) => {\r\n    openPopup(key, currentLabel, currentName);\r\n    if (inputRefs.current[key] && inputRefs.current[key].current) {\r\n        inputRefs.current[key].current.focus();\r\n    }\r\n};\r\n\r\nexport const setInputRef = (inputRefs) => {\r\n    return (key) => {\r\n        if (!inputRefs.current[key]) {\r\n            inputRefs.current[key] = React.createRef();\r\n        }\r\n        return inputRefs.current[key];\r\n    };\r\n};"],"mappings":"AAAA,OAAOA,KAAK,MAAM,OAAO;AACzB,OAAOC,KAAK,MAAM,OAAO;AACzB,SAASC,EAAE,IAAIC,MAAM,QAAQ,MAAM;AAEnC,OAAO,MAAMC,eAAe,GAAG,MAAAA,CAC3BC,SAAS,EACTC,YAAY,EACZC,cAAc,EACdC,eAAe,EACfC,gBAAgB,KACf;EACDD,eAAe,CAAC;IAAEE,MAAM,EAAE;EAAM,CAAC,CAAC;EAElC,IAAI,CAACL,SAAS,IAAI,CAACA,SAAS,CAACM,aAAa,EAAE;IACxC,IAAIF,gBAAgB,EAAE;MAClBA,gBAAgB,CAAC,gDAAgD,EAAE,OAAO,CAAC;IAC/E;IACA;EACJ;EAEA,IAAI;IACA;IACA,MAAMG,eAAe,GAAGT,MAAM,CAAC,CAAC;;IAEhC;IACA,MAAMU,YAAY,GAAG;MACjBC,GAAG,EAAEF,eAAe;MACpBG,QAAQ,EAAE,WAAW;MACrBC,KAAK,EAAE,eAAe;MACtBC,UAAU,EAAE,2BAA2B;MACvCC,mBAAmB,EAAE;IACzB,CAAC;;IAED;IACA,MAAMC,gBAAgB,GAAG;MACrBR,aAAa,EAAE,CAAC,GAAGN,SAAS,CAACM,aAAa,EAAEE,YAAY,CAAC;MACzDO,aAAa,EAAE,CAAC,GAAGf,SAAS,CAACe,aAAa;IAC9C,CAAC;;IAED;IACAd,YAAY,CAACa,gBAAgB,CAAC;;IAE9B;IACAE,OAAO,CAACC,GAAG,CAAC,sBAAsB,EAAET,YAAY,CAAC;IACjDQ,OAAO,CAACC,GAAG,CAAC,qBAAqB,EAAEH,gBAAgB,CAAC;;IAEpD;IACA,IAAIV,gBAAgB,EAAE;MAClBA,gBAAgB,CAAC,oCAAoC,EAAE,SAAS,CAAC;IACrE;EAEJ,CAAC,CAAC,OAAOc,KAAK,EAAE;IACZF,OAAO,CAACE,KAAK,CAAC,6BAA6B,EAAEA,KAAK,CAAC;IACnD,IAAId,gBAAgB,EAAE;MAClBA,gBAAgB,CAAC,8BAA8B,EAAE,OAAO,CAAC;IAC7D;EACJ;AACJ,CAAC;AAED,OAAO,MAAMe,gBAAgB,GAAGA,CAACC,SAAS,EAAEC,SAAS,EAAEZ,GAAG,EAAEa,YAAY,EAAEC,WAAW,KAAK;EACtFF,SAAS,CAACZ,GAAG,EAAEa,YAAY,EAAEC,WAAW,CAAC;EACzC,IAAIH,SAAS,CAACI,OAAO,CAACf,GAAG,CAAC,IAAIW,SAAS,CAACI,OAAO,CAACf,GAAG,CAAC,CAACe,OAAO,EAAE;IAC1DJ,SAAS,CAACI,OAAO,CAACf,GAAG,CAAC,CAACe,OAAO,CAACC,KAAK,CAAC,CAAC;EAC1C;AACJ,CAAC;AAED,OAAO,MAAMC,WAAW,GAAIN,SAAS,IAAK;EACtC,OAAQX,GAAG,IAAK;IACZ,IAAI,CAACW,SAAS,CAACI,OAAO,CAACf,GAAG,CAAC,EAAE;MACzBW,SAAS,CAACI,OAAO,CAACf,GAAG,CAAC,gBAAGd,KAAK,CAACgC,SAAS,CAAC,CAAC;IAC9C;IACA,OAAOP,SAAS,CAACI,OAAO,CAACf,GAAG,CAAC;EACjC,CAAC;AACL,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}